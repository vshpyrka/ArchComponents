<?xml version="1.0"?>

<ruleset xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="Basic Rules"
    xmlns="http://pmd.sf.net/ruleset/1.0.0"
    xsi:noNamespaceSchemaLocation="http://pmd.sf.net/ruleset_xml_schema.xsd"
    xsi:schemaLocation="http://pmd.sf.net/ruleset/1.0.0 http://pmd.sf.net/ruleset_xml_schema.xsd">
    <description>
        The Basic Ruleset contains a collection of good practices which everyone should follow.
    </description>

    <rule name="PrivateInjections" class="net.sourceforge.pmd.lang.rule.XPathRule"
        language="java" message="Please make injected fields private">

        <description>We don't take kindly to non private injected fields round
            these parts
        </description>
        <priority>1</priority>
        <properties>
            <property name="xpath">
                <value>
                    <![CDATA[
                        //ClassOrInterfaceDeclaration[@Interface='false']
                        /ClassOrInterfaceBody
                        /ClassOrInterfaceBodyDeclaration
                        [
                            not(Annotation//Name[ends-with(@Image, 'VisibleForTesting')]) and
                            not(Annotation//Name[ends-with(@Image, 'Inject')])
                        ]
                        [
                            FieldDeclaration[@PackagePrivate='true']
                            or MethodDeclaration[@PackagePrivate='true']
                        ]
                    ]]>
                </value>
            </property>
        </properties>
        <example>
            <![CDATA[
			@Inject
			public String myParameter; //is bad

			public String myParameter; //is better

			@Inject
			private String myParameter; //is best
    	]]>
        </example>
    </rule>

</ruleset>